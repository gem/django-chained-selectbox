(function(a){a(document).ready(function(){a.fn.loadChainedChoices_getInLoop=function(b,d,c){a.get(b,{field:d.attr("name").split("-")[2],parent_value:c},function(f){var e="";for(var g=0;g<f.length;g++){e+='<option value="'+f[g][0]+'">'+f[g][1]+"</option>"}d.html(e);d.trigger("change")},"json")};a.fn.loadChainedChoices=function(){for(var d=0;d<512;d++){if(a(this).attr("chained_id"+d)==undefined){break}var c=a(this).attr("chained_id"+d);if(c.indexOf("__prefix__")!=-1){c=c.replace("__prefix__",a(this).attr("name").split("-")[1]);a(this).attr("chained_id",c)}var e=a("#"+c);var b=e.attr("ajax_url");a(this).loadChainedChoices_getInLoop(b,e,a(this).val())}};a(".chained-parent-field").live("change",function(b){a(this).loadChainedChoices()})})})(django.jQuery);